# راهنمای استفاده و توسعه سیستم خودارتقا (self_upgrade_engine)

این فایل توضیح می‌دهد که چگونه از ماژول self_upgrade_engine برای خودتحلیل‌گری، پیشنهاد بهبود و بازنویسی خودکار کد استفاده کنید و توسعه‌دهندگان چگونه می‌توانند آن را گسترش دهند.

---

## قابلیت‌های کلیدی
- **تحلیل ساختار کد و ارائه پیشنهاد بهبود** (تابع self_read_and_suggest)
- **اتصال به مدل هوش مصنوعی برای دریافت پیشنهاد و بازنویسی کد** (تابع ai_analyze_and_rewrite)
- **اعمال خودکار برخی پیشنهادات یا جایگزینی کد بازنویسی‌شده** (تابع auto_apply_suggestions)
- **زمان‌بندی اجرای خودکار تحلیل و ارتقا** (upgrade_scheduler)
- **ثبت کامل لاگ و متادیتا برای هر چرخه خودارتقا**

---

## نحوه استفاده

۱. اجرای خودکار:
   - کافی است فایل self_upgrade_engine.py را اجرا کنید یا سیستم مرکزی را راه‌اندازی نمایید.
   - زمان‌بندی خودکار فعال است و هر دقیقه (یا طبق تنظیمات) تحلیل و ارتقا انجام می‌شود.

۲. اجرای دستی تحلیل و پیشنهاد:
```python
from T13_Engine import self_upgrade_engine
suggestions = self_upgrade_engine.self_read_and_suggest(smart_mode=True)
print(suggestions)
```

۳. تست واحد:
```bash
python -m unittest tests/test_self_upgrade_engine.py
```

۴. فعال‌سازی اتصال به مدل هوش مصنوعی:
- آدرس API را در پارامتر ai_api_url تنظیم کنید.
- اگر API فعال نباشد، سیستم به صورت graceful fail می‌کند و پیشنهادات rule-based ارائه می‌دهد.

---

## توسعه و گسترش
- برای افزودن قواعد جدید تحلیل کد، منطق rule-based را در self_read_and_suggest گسترش دهید.
- برای refactorهای پیچیده‌تر، منطق auto_apply_suggestions را توسعه دهید.
- برای تست‌های بیشتر، به فایل tests/test_self_upgrade_engine.py مراجعه و تست جدید اضافه کنید.

---

## نکات مهم
- همه لاگ‌ها و پیشنهادات در data/self_upgrade_suggestions.log و data/self_upgrade_meta.json ثبت می‌شوند.
- قبل از هر تغییر خودکار، نسخه پشتیبان تهیه می‌شود.
- سیستم در برابر خطاهای API و IO مقاوم است و crash نمی‌کند.

---

تهیه و توسعه: تیم پروژه T13
تاریخ: 1404/03/08
